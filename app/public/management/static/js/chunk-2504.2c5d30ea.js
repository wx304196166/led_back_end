(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2504"],{"5uLE":function(t,e,a){"use strict";a.r(e);var i=a("P2sY"),n=a.n(i),o=a("FyfS"),r=a.n(o),l=a("EJiy"),s=a.n(l),c=a("onop"),u=(a("KTTK"),a("WwZ8")),d={data:function(){return{sels:[],addDialog:!1,detailDialog:!1,deleteDialog:!1,editDialog:!1,isEdit:0,tableData:[],column:u.a.tableColumn,map:{classification_id:{},brand_id:{},label_id:{},product_id:{}},page:{current:1,map:{name:""},size:10,total:0}}},created:function(){this.map=this.$store.getters.map,this.map.is_main=["否","是"],this.initPageData()},methods:{getName:function(t,e){switch(void 0===t?"undefined":s()(t)){case"string":var a=[],i=!0,n=!1,o=void 0;try{for(var l,c=r()(t.split(","));!(i=(l=c.next()).done);i=!0){var u=l.value;a.push(this.map[e][u])}}catch(t){n=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw o}}return a.join(",");case"number":return this.map[e][t];default:return""}},search:function(){this.page.current=1,this.initPageData()},toDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;sessionStorage.setItem("productId",t),sessionStorage.setItem("productEditStatus",e),this.$store.dispatch("SET_MAP"),this.$router.push({path:"/products/productDetail"})},remove:function(){var t=this,e=this.sels.map(function(t){return t.id});c.a.batchDelete(e).then(function(e){0===e.code?(t.$message.success("删除成功"),t.initPageData(t.page.current),t.deleteDialog=!1):t.$message.error("删除失败")}).catch(function(){t.$message.error("删除失败.")})},dialogClose:function(){this.resetForm("form")},handleCurrentChange:function(t){this.page.current=t,this.initPageData()},initPageData:function(){var t=this;c.a.queryPageList(this.page).then(function(e){t.tableData=[],0===e.code?(t.page.total=e.data.total,t.tableData=e.data.records):(t.tableData=[],t.page.total=0),t.$refs.table.clearSelection()})},showModel:function(t,e){"detail"===t?(this.isEdit=0,this.detailDialog=!0,this.model=n()({},e)):"edit"===t&&(this.dialogTitle="修改",this.isEdit=1,this.addDialog=!0,this.model=n()({},e))},selsChange:function(t){this.sels=t},delGroup:function(){this.deleteDialog=!0},handleSelCurrentChange:function(t,e,a){this.$refs.table.toggleRowSelection(t)}}},p=(a("F3lq"),a("KHd+")),h=Object(p.a)(d,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"search-box"},[t._v("\n    产品名称\n    "),a("el-input",{staticStyle:{margin:"0 12px"},attrs:{placeholder:"请输入搜索内容"},nativeOn:{keypress:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.page.map.name,callback:function(e){t.$set(t.page.map,"name",e)},expression:"page.map.name"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("div",{staticStyle:{marginTop:"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.toDetail()}}},[t._v("添加\n      ")]),t._v(" "),a("el-button",{attrs:{disabled:0===t.sels.length,type:"danger"},on:{click:t.delGroup}},[t._v("批量删除\n      ")])],1)],1),t._v(" "),a("div",{staticClass:"table-box"},[a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0,stripe:""},on:{"row-click":t.handleSelCurrentChange,"selection-change":t.selsChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),t._l(t.column,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(i){return[e.hasMap?a("span",[t._v(t._s(t.getName(i.row[e.prop],e.prop)))]):a("span",[t._v(t._s(i.row[e.prop]))])]}}])})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("a",{staticClass:"abtn",on:{click:function(a){t.toDetail(e.row.id,1)}}},[t._v("修改")])])]}}])})],2)],1),t._v(" "),a("el-pagination",{staticStyle:{float:"right","margin-right":"2%"},attrs:{"page-size":t.page.size,total:t.page.total,layout:"prev, pager, next,total"},on:{"current-change":t.handleCurrentChange,"current-page":t.page.current}}),t._v(" "),a("el-dialog",{staticClass:"deleteDialog",attrs:{visible:t.deleteDialog,title:"删除确认",width:"40%"},on:{"update:visible":function(e){t.deleteDialog=e}}},[a("span",{staticStyle:{"text-align":"center"}},[t._v("确认要删除吗?")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.remove}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.deleteDialog=!1}}},[t._v("取消")])],1)])],1)},[],!1,null,"15b34bac",null);h.options.__file="index.vue";e.default=h.exports},F3lq:function(t,e,a){"use strict";var i=a("KwWM");a.n(i).a},FyfS:function(t,e,a){t.exports={default:a("Rp86"),__esModule:!0}},KwWM:function(t,e,a){},Rp86:function(t,e,a){a("bBy9"),a("FlQf"),t.exports=a("fXsU")},WwZ8:function(t,e,a){"use strict";e.a={model:{id:"",name:"",classification_id:"",brand_id:"",label_id:[],is_main:0,intro:"",specifications:"",img_list:[],thumbnail:"",product_id:[],detail:"",modification_user_id:"",modification_user_type:0},tableColumn:[{label:"产品名称",prop:"name"},{label:"所属分类",prop:"classification_id",hasMap:!0},{label:"所属品牌",prop:"brand_id",hasMap:!0},{label:"所属标签",prop:"label_id",hasMap:!0},{label:"是否主产品",prop:"is_main",hasMap:!0},{label:"规格",prop:"specifications"}]}},fXsU:function(t,e,a){var i=a("5K7Z"),n=a("fNZA");t.exports=a("WEpk").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},onop:function(t,e,a){"use strict";var i=a("t3Un"),n="product",o={queryPageList:function(t){return Object(i.a)({url:"/master/queryPageList/"+n,method:"post",data:t})},queryOne:function(t){return Object(i.a)({url:"/master/queryPageList/"+n,method:"get",params:{id:t}})},create:function(t){return Object(i.a)({url:"/master/create/"+n,method:"post",data:t})},update:function(t){return Object(i.a)({url:"/master/update/"+n,method:"post",data:t})},batchDelete:function(t){return Object(i.a)({url:"/master/batchDelete/"+n,method:"delete",data:t})}};e.a=o}}]);